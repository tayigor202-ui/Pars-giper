# –í–µ–±-–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ü–∞—Ä—Å–µ—Ä–∞ Ozon

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ó–∞–ø—É—Å–∫ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

```bash
start_web.bat
```

–ò–ª–∏ –Ω–∞–ø—Ä—è–º—É—é:
```bash
python web_app.py
```

### 2. –î–æ—Å—Ç—É–ø

- **URL:** http://localhost:3454
- **–õ–æ–≥–∏–Ω:** admin
- **–ü–∞—Ä–æ–ª—å:** admin (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

### 3. –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

#### ÔøΩÔøΩ –î–∞—à–±–æ—Ä–¥
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ (—Ç–æ–≤–∞—Ä—ã, —Ü–µ–Ω—ã, –º–∞–≥–∞–∑–∏–Ω—ã)
- –ì—Ä–∞—Ñ–∏–∫–∏ —Å—Ä–µ–¥–Ω–∏—Ö —Ü–µ–Ω –ø–æ –º–∞–≥–∞–∑–∏–Ω–∞–º
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥

#### ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ (–µ–∂–µ–¥–Ω–µ–≤–Ω–æ / –µ–∂–µ—á–∞—Å–Ω–æ / –∫–∞–∂–¥—ã–µ 6 —á–∞—Å–æ–≤)
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–ø—É—Å–∫–∞
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Google Sheets (URL + –Ω–∞–∑–≤–∞–Ω–∏–µ –ª–∏—Å—Ç–∞)

#### üéÆ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞—Ä—Å–µ—Ä–æ–º
- –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ –ø–∞—Ä—Å–µ—Ä–∞
- –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –õ–æ–≥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ë–î –∏–∑ Google Sheets

## –§–∞–π–ª–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```
ParserProd/
‚îú‚îÄ‚îÄ web_app.py                 # –ì–ª–∞–≤–Ω–æ–µ Flask –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îú‚îÄ‚îÄ parser_runner.py           # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞—Ä—Å–µ—Ä–æ–º –≤ —Ñ–æ–Ω–µ
‚îú‚îÄ‚îÄ scheduler.py               # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ
‚îú‚îÄ‚îÄ start_web.bat              # –ó–∞–ø—É—Å–∫ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
‚îú‚îÄ‚îÄ templates/                 # HTML —à–∞–±–ª–æ–Ω—ã
‚îÇ   ‚îú‚îÄ‚îÄ base.html
‚îÇ   ‚îú‚îÄ‚îÄ login.html
‚îÇ   ‚îú‚îÄ‚îÄ dashboard.html
‚îÇ   ‚îú‚îÄ‚îÄ settings.html
‚îÇ   ‚îî‚îÄ‚îÄ parser_control.html
‚îú‚îÄ‚îÄ static/                    # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
‚îÇ   ‚îú‚îÄ‚îÄ css/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ style.css
‚îÇ   ‚îî‚îÄ‚îÄ js/
‚îÇ       ‚îú‚îÄ‚îÄ dashboard.js       # –ì—Ä–∞—Ñ–∏–∫–∏ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
‚îÇ       ‚îî‚îÄ‚îÄ parser.js          # –ö–æ–Ω—Ç—Ä–æ–ª—å –ø–∞—Ä—Å–µ—Ä–∞
‚îî‚îÄ‚îÄ web_settings.json          # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ (—Å–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–æ–ª—è

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (.env)

```env
ADMIN_USERNAME=admin
ADMIN_PASSWORD_HASH=your_bcrypt_hash_here
FL ASK_SECRET_KEY=your-secret-key-here
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ö–µ—à–∞ –ø–∞—Ä–æ–ª—è

```python
import bcrypt
password = "your_password"
hash = bcrypt.hashpw(password.encode('utf-8'), bcrypt.gensalt())
print(hash.decode('utf-8'))
```

## API Endpoints

### Parser Control
- `POST /api/parser/start` - –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–∞—Ä—Å–µ—Ä
- `GET /api/parser/status` - –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç—É—Å –ø–∞—Ä—Å–µ—Ä–∞

### Database
- `POST /api/database/update` - –û–±–Ω–æ–≤–∏—Ç—å –∏–∑ Google Sheets

### Dashboard
- `GET /api/dashboard/stats` - –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É

## –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ

–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `web_settings.json`:

```json
{
  "schedule_enabled": true,
  "schedule_time": "09:00",
  "schedule_frequency": "daily",
  "google_sheet_url": "https://docs.google.com/spreadsheets/d/...",
  "google_sheet_name": "–õ–∏—Å—Ç1"
}
```

## –ü–æ—Ä—Ç

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: **3454**

–ò–∑–º–µ–Ω–∏—Ç—å –≤ `web_app.py`:
```python
app.config['PORT'] = 3454
```

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.8+
- Flask
- Flask-Login
- APScheduler
- bcrypt
- psycopg2-binary (–¥–ª—è PostgreSQL)

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ Bcrypt —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π
- ‚úÖ Flask-Login —Å–µ—Å—Å–∏–∏
- ‚úÖ @login_required –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã
- ‚ö†Ô∏è **–î–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω:** –ò–∑–º–µ–Ω–∏—Ç–µ SECRET_KEY –∏ ADMIN_PASSWORD

## Troubleshooting

### –ü–æ—Ä—Ç –∑–∞–Ω—è—Ç
–ò–∑–º–µ–Ω–∏—Ç–µ –ø–æ—Ä—Ç –≤ `web_app.py` –∏–ª–∏ –∑–∞–≤–µ—Ä—à–∏—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å:
```bash
netstat -ano | findstr :3454
taskkill /PID <pid> /F
```

### –ù–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø–∞—Ä—Å–µ—Ä
–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ 3proxy –¥–æ—Å—Ç—É–ø–µ–Ω –∏ `start_3proxy.bat` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç.

### –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ `.env` —Ñ–∞–π–ª –Ω–∞ –Ω–∞–ª–∏—á–∏–µ DB_* –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö.
